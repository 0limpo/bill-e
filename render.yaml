services:
  - type: web
    name: bill-e-backend
    env: python
    region: oregon
    plan: free
    rootDir: backend
    buildCommand: "pip install -r requirements.txt"
    startCommand: "uvicorn main:app --host 0.0.0.0 --port $PORT"

# Cron job desactivado temporalmente (timeout issues)
#  - type: cron
#    name: bill-e-sync
#    env: python
#    region: oregon
#    plan: starter
#    schedule: "*/15 * * * *"
#    buildCommand: "pip install requests"
#    startCommand: "python -c \"import requests; import os; r = requests.post('https://bill-e-backend-lfwp.onrender.com/api/cron/full-sync', params={'secret': os.getenv('ADMIN_SECRET', 'bill-e-admin-2024')}); print(r.status_code, r.text)\""